# movie
面向编程小白的观影记录爬取&amp;备份&amp;分析

先上代码：即douban_movie_analysis.ipynb

使用方法：下载这份代码，在python Jupyter 上运行即可（推荐使用Anaconda，对小白最友好，有齐全的python库，有Jupyter，下载地址：https://www.anaconda.com/download/success。）

爬取效果和一些分析结果：

<img width="1508" alt="p1" src="https://github.com/user-attachments/assets/a8570d4a-f326-447c-96e1-c241629d885c">
<img width="1104" alt="p2" src="https://github.com/user-attachments/assets/18685cf4-b0e1-4980-9fc4-be74e8082354">

可以清晰的展示观影记录，包括电影评分、时长、我的评分、评论、观看时间，电影的“看过”、“想看”、“评分”人数（可以自由设置自己关注的内容），可以计算所有电影的平均评分（我的是8.6）、你的平均打分（3.77）、看过or想看人数最多的电影，等等，我这种喜欢看数据的觉得比较有意思。

（从我的观影记录中）：看过人数最多的电影是《我不是药神》，620万，想看人数最多的是《漫长的季节》，104万，评分人数最多的是《肖申克的救赎》，303万。

另外的，可以生成观影量随时间的视频或者动图（毕业之后曲线明显平缓了😓）。
<img width="1357" alt="p3" src="https://github.com/user-attachments/assets/6093b15a-9885-4658-9aca-8f1d658b6102">

下面具体讲使用方法。在Anaconda的Jupyter Notebook中打开，

第一节：导入库文件与准备工作。按理说anaconda中应该是齐全的，不用额外安装。

第二节：将url_origin修改为你的电影主页的地址。提示：可以翻到“我看过的影视”的第二页，将这里的<collect?start=15?改为<collect?start=0>。这一节生成<看过的电影数量为843, 需要爬取的页面数量为57>。

<img width="1493" alt="p4" src="https://github.com/user-attachments/assets/68fab094-0096-4907-af5c-3607247db658">

第三节：同样将urls[i]修改为你的电影主页地址。这一节得到所有需爬取的页面。（观影总量除以15，因为每页有15个电影条目。）

第四节：保存刚刚得到的所有页面数据，后续就不用再爬一遍。

第五节：第一次使用可忽略，用于读取刚刚保存的数据。

第六节：提取每个电影的页面，并输出无法爬取的电影名称。有些电影是豆瓣设置了无法爬取的，例如李小璐演的电影《天浴》。

第七节：保存刚刚得到的所有页面数据，后续就不用再爬一遍。

第八节：同第五节，第一次可忽略。

第九节：直接运行。

第十节：直接运行。

第十一节：最重要的爬取数据一节，可能会报错，要爬取每一个电影页面，时间与网速有关，我基本上每分钟10-20页；在我的代码中，135号是电影《黑社会》，爬取的数据报错，我就直接跳过了这一页不进行爬取。如果这一节成功运行，那么我们的爬取就已经成功了，后续就是将结果导出。

第十二节：对提取的电影性质进行排序，直接运行。

第十三节：导出为excel文件，打开后即为所有观影记录。

第十四节：生成观影量随时间变化视频的代码，小白可先暂缓尝试。
